(this["webpackJsonpmoody-music"]=this["webpackJsonpmoody-music"]||[]).push([[0],{106:function(t,e,o){},107:function(t,e,o){},121:function(t,e,o){},240:function(t,e,o){"use strict";o.r(e);var n=o(3),s=o(0),i=o.n(s),a=o(92),c=o.n(a),r=(o(106),o(107),o(4)),l=o(60),u=(o(121),o(7)),h=o(8),p=o(10),d=o(9),b=function(t){Object(p.a)(o,t);var e=Object(d.a)(o);function o(t){var n;return Object(u.a)(this,o),(n=e.call(this,t)).state={token:""},n}return Object(h.a)(o,[{key:"componentDidMount",value:function(){var t=window.location.hash.substring(1).split("&").reduce((function(t,e){if(e){var o=e.split("=");t[o[0]]=decodeURIComponent(o[1])}return t}),{});window.location.hash="";t.access_token||(window.location="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("3c6967b4c5d84ba9bb81d27d7d2f3f2f","&redirect_uri=").concat("http://localhost:3000","&scope=").concat(["user-top-read","playlist-modify-private","playlist-modify-public"].join("%20"),"&response_type=token&show_dialog=true"))}},{key:"render",value:function(){return Object(n.jsx)("div",{children:"authorizing..."})}}]),o}(i.a.Component),f=o(13),j=o(95),m=o.n(j),g=o(37),O=o(14),v=function(t){Object(p.a)(o,t);var e=Object(d.a)(o);function o(t){var n;Object(u.a)(this,o),n=e.call(this,t),console.log(n.props);var s="";return"undefined"===typeof n.props.location.state?(n.props.history.push("/error"),Object(g.a)(n)):(s=n.props.location.state.token,n.state={token:s,artists:[],moodOption:"",isSelected:!1},n.getData=n.getData.bind(Object(O.a)(n)),n.onValueChange=n.onValueChange.bind(Object(O.a)(n)),n.formSubmit=n.formSubmit.bind(Object(O.a)(n)),n)}return Object(h.a)(o,[{key:"onValueChange",value:function(t){this.setState({moodOption:t.target.value,isSelected:!0}),console.log(t.target.value)}},{key:"formSubmit",value:function(t){t.preventDefault(),console.log(this.state.moodOption)}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var t=this;fetch("https://api.spotify.com/v1/me/top/artists",{method:"GET",headers:{Authorization:"Bearer "+this.state.token}}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json()})).then((function(e){var o=[];e.items.map((function(t){o.push(t.name)})),t.setState((function(t){return{artists:o}}))})).catch((function(e){console.log(e),t.props.history.push("/error")}))}},{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{children:[Object(n.jsx)("div",{className:"radio",children:Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"radio",value:"Male",checked:"Male"===this.state.moodOption,onChange:this.onValueChange}),"Male"]})}),Object(n.jsx)("div",{className:"radio",children:Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"radio",value:"Female",checked:"Female"===this.state.moodOption,onChange:this.onValueChange}),"Female"]})}),Object(n.jsx)("div",{className:"radio",children:Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"radio",value:"Other",checked:"Other"===this.state.moodOption,onChange:this.onValueChange}),"Other"]})}),Object(n.jsxs)("div",{children:["Selected option is : ",this.state.moodOption]}),Object(n.jsx)(f.b,{to:{pathname:"/color",state:{token:this.state.token,moodOption:this.state.moodOption}},children:Object(n.jsx)("button",{disabled:!this.state.isSelected,className:"btn btn-default",type:"submit",children:"Submit"})})]})})}}]),o}(i.a.Component),y=function(t){Object(p.a)(o,t);var e=Object(d.a)(o);function o(t){var n;return Object(u.a)(this,o),(n=e.call(this,t)).state={token:"",loggedIn:!1,message:"Log in with Spotify to get started!"},n}return Object(h.a)(o,[{key:"componentDidMount",value:function(){var t=m.a.parse(window.location.hash).access_token;t?(console.log("if"),this.setState((function(e){return{token:t,loggedIn:!0,message:"Authentication successful."}}))):(console.log("else"),this.setState((function(e){return{token:t,loggedIn:!1,message:""}})))}},{key:"render",value:function(){var t=this.state.loggedIn;return Object(n.jsxs)("div",{children:["welcome 2 moody music",Object(n.jsx)("br",{}),t?Object(n.jsx)(f.b,{to:{pathname:"/mood",state:{token:this.state.token}},children:Object(n.jsx)("button",{children:"continue"})}):Object(n.jsx)(f.b,{to:"/login",children:Object(n.jsx)("button",{children:"Login with Spotify"})})]})}}]),o}(i.a.Component),k=function(t){Object(p.a)(o,t);var e=Object(d.a)(o);function o(t){var n;return Object(u.a)(this,o),n=e.call(this,t),console.log(n.props.location.state),n.state={token:n.props.location.state.token,moodOption:n.props.location.state.moodOption,artists:[],hex:n.props.location.state.hex,hsl:n.props.location.state.hsl,rgb:n.props.location.state.rgb},n.getTopArtists=n.getTopArtists.bind(Object(O.a)(n)),n.getUser=n.getUser.bind(Object(O.a)(n)),n.getPlaylist=n.getPlaylist.bind(Object(O.a)(n)),n}return Object(h.a)(o,[{key:"componentDidMount",value:function(){this.getUser(),this.getTopArtists()}},{key:"getTopArtists",value:function(){var t=this;fetch("https://api.spotify.com/v1/me/top/artists?limit=5",{method:"GET",headers:{Authorization:"Bearer "+this.state.token}}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json()})).then((function(e){var o=[],n="";e.items.map((function(t){o.push(t.name),n=n+t.id+","})),t.setState((function(t){return{artists:o,artistQuery:n}}))})).catch((function(t){return console.log(t)}))}},{key:"getUser",value:function(){var t=this;fetch("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:"Bearer "+this.state.token}}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json()})).then((function(e){t.setState((function(t){return{userId:e.id}})),console.log(e.id)})).catch((function(t){return console.log(t)}))}},{key:"getPlaylist",value:function(){var t=this,e="https://api.spotify.com/v1/recommendations?limit=20&seed_artists="+this.state.artistQuery,o="https://api.spotify.com/v1/users/"+this.state.userId+"/playlists";fetch(e,{method:"GET",headers:{Authorization:"Bearer "+this.state.token}}).then((function(t){if(console.log(t),!t.ok)throw Error(t);return t.json()})).then((function(e){var o="";return e.tracks.map((function(t){o=o+t.uri+","})),t.setState({songs:o}),o})).then((function(e){fetch(o,{method:"POST",headers:{Authorization:"Bearer "+t.state.token},body:JSON.stringify({name:t.state.hex,description:"New playlist description",public:!1})}).then((function(t){if(console.log(t),!t.ok)throw Error(t);return t.json()})).then((function(e){return t.setState({playlistURI:e.external_urls.spotify}),e.id})).then((function(e){console.log(encodeURI("https://api.spotify.com/v1/playlists/"+e+"/tracks?uris="+t.state.songs)),fetch("https://api.spotify.com/v1/playlists/"+e+"/tracks?uris="+t.state.songs,{method:"POST",headers:{Authorization:"Bearer "+t.state.token}}).then((function(t){if(console.log(t),!t.ok)throw Error(t)})).catch((function(t){return console.log(t)}))})).catch((function(t){return console.log(t)}))})).catch((function(t){return console.log(t)}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:["hello",this.state.artistQuery,Object(n.jsx)("button",{onClick:this.getPlaylist,children:"get playlist"}),this.state.playlistURI]})}}]),o}(i.a.Component),x=o(100),C=function(t){Object(p.a)(o,t);var e=Object(d.a)(o);function o(t){var n;return Object(u.a)(this,o),(n=e.call(this,t)).handleChangeComplete=function(t){n.setState({hex:t.hex,hsl:t.hsl,rgb:t.rgb}),console.log(t.rgb)},n.state={token:n.props.location.state.token,moodOption:n.props.location.state.moodOption,hex:"#fff",hsl:{h:0,s:0,l:1},rgb:{r:0,g:0,b:0}},console.log("hello"),console.log(n.props.location.state),console.log(n.props.location.state.moodOption),n.getData=n.getData.bind(Object(O.a)(n)),n}return Object(h.a)(o,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var t=this;fetch("https://api.spotify.com/v1/me/top/artists",{method:"GET",headers:{Authorization:"Bearer "+this.state.token}}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json()})).then((function(e){var o=[];e.items.map((function(t){o.push(t.name)})),t.setState((function(t){return{artists:o}}))})).catch((function(e){t.props.history.push("/error"),console.log(e)}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{style:{backgroundColor:this.state.hex},children:[Object(n.jsx)(x.a,{color:this.state.hex,onChange:this.handleChangeComplete}),Object(n.jsx)(f.b,{to:{pathname:"/playlist",state:{token:this.state.token,hex:this.state.hex,hsl:this.state.hsl,rgb:this.state.rgb}},children:Object(n.jsx)("button",{className:"btn btn-default",type:"submit",children:"Submit"})})]})}}]),o}(i.a.Component),w=function(t){Object(p.a)(o,t);var e=Object(d.a)(o);function o(t){var n;return Object(u.a)(this,o),(n=e.call(this,t)).state={redirect:!1},n}return Object(h.a)(o,[{key:"componentDidMount",value:function(){setTimeout((function(){window.history.push("/login")}),1e4)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.id)}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:["authentication error, redirecting you to login...",Object(n.jsx)(r.a,{to:"/login"})]})}}]),o}(i.a.Component);function S(t){return Object(l.b)(t,{stiffness:330,damping:22})}S(0),S(.8),S(1),S(1);var T=function(){return Object(n.jsxs)(l.a,{atEnter:{opacity:0},atLeave:{opacity:0},atActive:{opacity:1},className:"switch-wrapper",children:[Object(n.jsx)(r.b,{exact:!0,path:"/",component:y}),Object(n.jsx)(r.b,{exact:!0,path:"/login",component:b}),Object(n.jsx)(r.b,{exact:!0,path:"/mood",component:v}),Object(n.jsx)(r.b,{exact:!0,path:"/color",component:C}),Object(n.jsx)(r.b,{exact:!0,path:"/playlist",component:k}),Object(n.jsx)(r.b,{exact:!0,path:"/error",component:w})]})},D=function(t){Object(p.a)(o,t);var e=Object(d.a)(o);function o(){return Object(u.a)(this,o),e.apply(this,arguments)}return Object(h.a)(o,[{key:"render",value:function(){return Object(n.jsx)("div",{children:"moody music"})}}]),o}(i.a.Component);var E=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(D,{}),Object(n.jsx)(T,{})]})},A=function(t){t&&t instanceof Function&&o.e(3).then(o.bind(null,242)).then((function(e){var o=e.getCLS,n=e.getFID,s=e.getFCP,i=e.getLCP,a=e.getTTFB;o(t),n(t),s(t),i(t),a(t)}))};c.a.render(Object(n.jsx)(f.a,{children:Object(n.jsx)(E,{})}),document.getElementById("root")),A()}},[[240,1,2]]]);
//# sourceMappingURL=main.cdeaa531.chunk.js.map